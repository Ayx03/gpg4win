#! /bin/sh
patch -p1 -l -f $* < $0
exit $?

From 3a195d97ed37f08010e16857f7cbb40595408069 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ingo=20Kl=C3=B6cker?= <dev@ingo-kloecker.de>
Date: Mon, 3 Jul 2023 17:36:51 +0200
Subject: [PATCH] Include stdarg.h for va_start and va_end

Fixes "implicit declaration of function" errors.
---
 core/synctex/synctex_parser.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/core/synctex/synctex_parser.c b/core/synctex/synctex_parser.c
index cc97ecc52..e212bb878 100644
--- a/core/synctex/synctex_parser.c
+++ b/core/synctex/synctex_parser.c
@@ -8012,6 +8012,8 @@ struct synctex_updater_t {
     int length; /*  the number of chars appended */
 };

+#include <stdarg.h>
+
 static int _synctex_updater_print(synctex_updater_p updater, const char *format, ...) SYNCTEX_PRINTF_FORMAT(2, 3);
 static int _synctex_updater_print(synctex_updater_p updater, const char *format, ...)
 {
@@ -8025,7 +8027,6 @@ static int _synctex_updater_print(synctex_updater_p updater, const char *format,
     return result;
 }
 #if defined(_MSC_VER) || defined(__MINGW32__)
-#include <stdarg.h>
 #include <stdio.h>
 #include <stdlib.h>

--
2.41.0

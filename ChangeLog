2005-11-08  Werner Koch  <wk@g10code.com>

	* src/installer.nsi (T_WelcomeTitle): New.
	(MUI_WELCOMEPAGE_TITLE): New.
	(MUI_FINISHPAGE): Enhanced.

	* src/installer-finish.nsi (Uninstall): use a loop to delete the
	startmenu.  Fixed Registry cleaning.

	* src/inst-sections.nsi (onInit): Make sure that only one
	installer is running.

2005-11-07  Werner Koch  <wk@g10code.com>

	* src/installer-finish.nsi: Fixed dereferencing of variable.

	* src/inst-sections.nsi, src/installer-finish.nsi: Ensure that the
	menu gets written for all users.

	* packages/download.sh: Add dummy manual pages.

	* src/installer.nsi: Move compression type to ...
	* src/gpg4win.nsi: .. here and ...
	* src/gpg4win-src.nsi: .. here.  Use zlib for sources.
	
	* src/gpg4win-splash.bmp: New.
	* src/gpg4win-splash.wav: New.
	* src/installer.nsi: Reserve these files
	* src/inst-sections.nsi: Show silly splash screen.
	
	* include/config.nsi.in: Add dummy packages for the manuals.
	* src/uninst-man_advanced_de.nsi, src/uninst-man_novice_de.nsi
	* src/inst-man_advanced_de.nsi, src/inst-man_novice_de.nsi: Ditto.
	* src/Makefile.am (gpg4win_spkgs): Ditto.
	* src/inst-sections.nsi: Ditto.
	
	* src/installer-finish.nsi: Ditto.

	* src/inst-gnupg.nsi: Make section read-only.

2005-11-04  Marcus Brinkmann  <marcus@g10code.de>

	Released 0.0.1.

	* Makefile.am (EXTRA_DIST): Add missing backslash.
	* include/config.nsi.in (top_srcdir): Remove.
	* src/Makefile.am (gpg4win-src-$(VERSION).exe): Pass TOP_SRCDIR,
	SRCDIR and BUILD_DIR (absolute path) as defined values.  Also, use
	$(srcdir) for nsi source file.
	(gpg4win-src-$(VERSION).exe): Likewise.
	* src/gpg4win.nsi: Change directory to build directory.
	Add include dirs ${TOP_SRCDIR} and ${SRCDIR}.
	* src/gpg4win-src.nsi: Likewise.
	* src/installer.nsi: Use ${TOP_SRCDIR} to access COPYING file.
	* src/gpg4win.mk (stamps/stamp-final): Depend on
	stamps/stamp-directories.

2005-11-03  Werner Koch  <wk@g10code.com>

	* include/config.nsi.in: Adjusted for WinPT being a source package now.

	* src/inst-winpt.nsi: Adjusted location of to be installed files.

	* src/Makefile.am (gpg4win_spkgs): Add winpt.
	(gpg4win_bpkgs): Remove winpt
	(gpg4win_pkg_winpt_configure): Added.

	* configure.ac (winpt): Made it a source package.

	* configure.ac: Bail out if a required tool is missing.

2005-11-02  Werner Koch  <wk@g10code.com>

	* README.SVN, autogen.sh: New.

	* Makefile.am (AUTOMAKE_OPTIONS): Add dist-bzip2.

	* packages/download.sh: Removed inclusion of config.h and defined
	WGET directly.  This is required because the download script needs
	to be used before configure and thus we can't use configure to
	determine the to be used wget; the config.sh script was anyway
	missing.

2005-10-26  Werner Koch  <wk@g10code.com>

	* README: Add basic instructions on how to add new packages.

	* configure.ac: Add detection of GPGee and WinPT.
	* m4/gpg4win.m4 (GPG4WIN_BPKG_BINSRC): New.

	* include/config.nsi.in: Add defines for WinPT and GGee.
	* src/inst-winpt.nsi: New.
	* src/inst-gpgee.nsi: New.
	* src/uninst-winpt.nsi: New.
	* src/uninst-gpgee.nsi: New.
	* src/Makefile.am (gpg4win_bpkgs): Add WinPT and GPGee.
	* src/inst-sections.nsi: Ditto.
	* src/installer-finish.nsi: Ditto.
	* packages/download.sh (server_winpt): Add WinPT.
	(server_gpgee): Add temporary location for gpgee.
	(server_g10code): Add temporary location for gpg-error, gpgme,
	gpa and gpgol.

2005-10-25  Werner Koch  <wk@g10code.com>

	* src/installer.nsi: Don't put the version into the "Name" variable.

2005-10-24  Marcus Brinkmann  <marcus@g10code.de>

	* COPYING: New file.

2005-10-23  Marcus Brinkmann  <marcus@g10code.de>

	* src/gpg4win.mk.in (pdir): Call post_install with source dir as
	current directory.
	* configure.ac (VERSION): Check for dlltool.
	* src/Makefile.am (gpg4win_pkg_libiconv_post_install,
	gpg4win_pkg_gettext_post_install): New macros.
	* src/libiconv.def, src/libintl.def: New files.
	* src/inst-libgpg-error.nsi: Install mo files.
	* src/uninst-libgpg-error.nsi: Uninstall mo files.

2005-10-22  Marcus Brinkmann  <marcus@g10code.de>

	* configure.ac: Add libiconv and gettext as dependencies for
	libgpg-error and gpa.
	* src/Makefile.am (gpg4win_pkg_libgpg_error_configure): New
	variable.

	* src/Makefile.am (common_nsi): Add uninstaller files.
	* src/uninst-atk.nsi, src/uninst-gettext.nsi, src/uninst-glib.nsi,
	src/uninst-gnupg.nsi, src/uninst-gpa.nsi, src/uninst-gpgme.nsi,
	src/uninst-gpgol.nsi, src/uninst-gtk+.nsi,
	src/uninst-libgpg-error.nsi, src/uninst-libiconv.nsi,
	src/uninst-libpng.nsi, src/uninst-pango.nsi,
	src/uninst-pkgconfig.nsi, src/uninst-zlib.nsi: New file.
	* src/inst-sections.nsi: Include the uninstallers in reverse
	order.
	* src/inst-gpgol.nsi: Register the gpgol DLL at installation, and
	(surprise!) unregister it at deinstallation.

2005-10-21  Marcus Brinkmann  <marcus@g10code.de>

	* src/Makefile.am (gpg4win_pkg_gpgme_configure): Enable static
	library for gpgol.
	(gpg4win_pkg_gpgol_configure): Add gpg-error prefix.

	* src/inst-gnupg.nsi: Fix path of deleted files.

	* src/gpg4win.mk.in (pdir): Don't strip DLL files.

2005-10-20  Marcus Brinkmann  <marcus@g10code.de>

	* m4/gpg4win.m4 (GPG4WIN_DEFINE): New function.  Use it to define
	feature symbols for NSI.  Use m4_translit instead of m4_bpatsubst.
	New option --enable-debug.
	* include/config.nsi.in: Catch all this new information.
	* src/gpg4win.nsi (DEBUG): Define if [GPG4WIN_DEBUG].
	(HAVE_PKG_GPA): Don't define here.
	* src/inst-sections.nsi: Guard all package specific commands with
	feature macro checks.  Calculate dependencies on .onInit, too.
	* src/gpg4win.mk.in (STRIP_macro): Quote $(DEBUG) strictly.

	* src/installer-finish.nsi: Add support for Add/Remove Programs.

2005-10-20  Werner Koch  <wk@g10code.com>

	* m4/gpg4win.m4 (GPG4WIN_FIND): Quote a file variable.
	(GPG4WIN_SPKG): Ditto.

2005-10-20  Marcus Brinkmann  <marcus@g10code.de>

	* src/gpg4win.nsi: Add start menu support.
	* src/inst-sections.nsi: Likewise.
	* src/installer.nsi: Likewise.
	* src/installer-finish.nsi: Likewise.

	* src/gpg4win.mk.in (GETVAR): Don't quote the first $.
	(STRIP_macro): New macro.
	(SPKG, BPKG): Use it here.

	* Makefile.am (EXTRA_DIST): New target.
	* include/Makefile.am (EXTRA_DIST): Change config.nsh.in to
	config.nsi.in.
	* src/Makefile.am (EXTRA_DIST): Remove pkg-config.  Add nsi files.

	* src/inst-gpgol.nsi: Change libgpgol-0.9.3.dll to gpgol.dll.

	* src/gpg4win.mk.in (stamp/stamp-$(1)-02-configure): Add
	-mms-bitfields to CFLAGS.

	* src/gpg4win.mk.in (stamps/stamp-final): New target that replaces
	phony target final.

2005-10-20  Werner Koch  <wk@g10code.com>

	* src/*.nsi: Add a Latin-1 tag to make sure that Emacs uses the
	correct encoding.
	* doc/nsi-mode.el: Added for convenience.

2005-10-20  Marcus Brinkmann  <marcus@g10code.de>

	* configure.ac: Check for makensis.  Add gnupg as dependency for
	gpgme.  Change config.sh into config.nsi.
	* include/config.sh.in: File removed.
	* src/gpg4win.sh: File removed.
	* include/config.nsi.in: New file.
	* include/Makefile.am (EXTRA_DIST): Change config.sh.in into
	config.nsi.in.
	* src/Makefile.am (gpg4win-$(VERSION).exe): New target.
	(gpg4win-src-$(VERSION).exe): New target.
	(all-local): Remove dependency on phony target all-gpg4win.
	(all-local): Add dependency on gpg4win-$(VERSION).exe and
	gpg4win-src-$(VERSION).exe.
	(clean-local): New rule for this target.
	* src/gpg4win.nsi, src/gpg4win-src.nsi, src/inst-atk.nsi,
	src/inst-gettext.nsi, src/inst-glib.nsi, src/inst-gnupg.nsi,
	src/inst-gpa.nsi, src/inst-gpgme.nsi, src/inst-gpgol.nsi,
	src/inst-gtk+.nsi, src/inst-libgpg-error.nsi,
	src/inst-libiconv.nsi, src/inst-libpng.nsi, src/inst-pango.nsi,
	src/inst-pkgconfig.nsi, src/inst-sections.nsi, src/inst-zlib.nsi,
	src/installer-finish.nsi, src/installer.nsi: New file.

2005-10-18  Marcus Brinkmann  <marcus@g10code.de>

	configure.ac: Enable libiconv and gettext dependencies for Gtk+.

	* src/Makefile.am: First real implementation.
	* src/gpg4win.mk.in: New file.
	* configure.ac: Activate libiconv and gettext.
	(AC_CONFIG_FILES): Add packages/Makefile and src/gpg4win.mk.
	* m4/gpg4win.m4 (GPG4WIN_BPKG_GNU): New macro.
	* include/config.sh.in: Add variables for libiconv and gettext.

2005-10-15  Marcus Brinkmann  <marcus@g10code.de>

	* m4/gpg4win.m4: New file.
	* include/config.sh: Add many package variables.
	* configure.ac: Call package detection macros.
	* Makefile.am (ACLOCAL_AMFLAGS): New variable.
	* src/gpg4win.sh: Use some of the new variables.

	* packages/download.sh: Fix downloading of Gtk source packages.


 Copyright 2005 g10 Code GmbH

 This file is free software; as a special exception the author gives
 unlimited permission to copy and/or distribute it, with or without
 modifications, as long as this notice is preserved.

 This file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY, to the extent permitted by law; without even the
 implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
